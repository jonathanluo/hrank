#!/bin/bash

cd `dirname $0`/..
EXAMPLES_DIR=`pwd`
EXAMPLE=$1
COHERENCE_HOME=$EXAMPLES_DIR/../..

. ./bin/function_set_env

set_env
if [ "$EXAMPLE" == "federation" ]; then
	CLUSTER=$2

  # set the correct keystore for the cluster
  if [ "$SSL" == "true" ] ; then
    SSL_CONFIG="-Didentity.manager=file:${CLUSTER}-keystore.jks"
  fi

	if [ "$CLUSTER" == "ClusterA" ]; then
		COH_OPTS="$COH_OPTS -Dcoherence.clusterport=11100 -Dcoherence.cluster=ClusterA $SSL_CONFIG"
	elif [ "$CLUSTER" == "ClusterB" ]; then
		COH_OPTS="$COH_OPTS -Dcoherence.clusterport=11200 -Dcoherence.cluster=ClusterB $SSL_CONFIG"
	else
		echo Please specify the cluster name of federation cluster: ClusterA or ClusterB
		exit 1
	fi
fi

$JAVA_HOME/bin/java $COH_OPTS -Xms512m -Xmx512m com.tangosol.net.DefaultCacheServer
cd
